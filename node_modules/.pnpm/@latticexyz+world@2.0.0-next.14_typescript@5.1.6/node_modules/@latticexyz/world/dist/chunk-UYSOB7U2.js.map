{"version":3,"sources":["../ts/config/defaults.ts","../ts/config/worldConfig.ts"],"sourcesContent":["export const SYSTEM_DEFAULTS = {\n  registerFunctionSelector: true,\n  openAccess: true,\n  accessList: [] as string[],\n} as const;\n\nexport const WORLD_DEFAULTS = {\n  worldContractName: undefined,\n  worldInterfaceName: \"IWorld\",\n  systems: {} as Record<string, never>,\n  excludeSystems: [] as string[],\n  postDeployScript: \"PostDeploy\",\n  deploysDirectory: \"./deploys\",\n  worldsFile: \"./worlds.json\",\n  worldgenDirectory: \"world\",\n  worldImportPath: \"@latticexyz/world/src/\",\n  modules: [] as [],\n} as const;\n","import { z } from \"zod\";\nimport { DynamicResolutionType, zEthereumAddress, zName, zObjectName } from \"@latticexyz/config\";\nimport { SYSTEM_DEFAULTS, WORLD_DEFAULTS } from \"./defaults\";\n\nconst zSystemName = zObjectName;\nconst zModuleName = zObjectName;\nconst zSystemAccessList = z.array(zSystemName.or(zEthereumAddress)).default(SYSTEM_DEFAULTS.accessList);\n\n// The system config is a combination of a name config and access config\nconst zSystemConfig = z.intersection(\n  z.object({\n    name: zName.optional(),\n    registerFunctionSelectors: z.boolean().default(SYSTEM_DEFAULTS.registerFunctionSelector),\n  }),\n  z.discriminatedUnion(\"openAccess\", [\n    z.object({\n      openAccess: z.literal(true).default(SYSTEM_DEFAULTS.openAccess),\n    }),\n    z.object({\n      openAccess: z.literal(false),\n      accessList: zSystemAccessList,\n    }),\n  ])\n);\n\nconst zValueWithType = z.object({\n  value: z.union([z.string(), z.number(), z.instanceof(Uint8Array)]),\n  type: z.string(),\n});\nconst zDynamicResolution = z.object({ type: z.nativeEnum(DynamicResolutionType), input: z.string() });\n\nconst zModuleConfig = z.object({\n  name: zModuleName,\n  root: z.boolean().default(false),\n  args: z.array(z.union([zValueWithType, zDynamicResolution])).default([]),\n});\n\n// The parsed world config is the result of parsing the user config\nexport const zWorldConfig = z.object({\n  worldContractName: z.string().optional(),\n  worldInterfaceName: z.string().default(WORLD_DEFAULTS.worldInterfaceName),\n  systems: z.record(zSystemName, zSystemConfig).default(WORLD_DEFAULTS.systems),\n  excludeSystems: z.array(zSystemName).default(WORLD_DEFAULTS.excludeSystems),\n  postDeployScript: z.string().default(WORLD_DEFAULTS.postDeployScript),\n  deploysDirectory: z.string().default(WORLD_DEFAULTS.deploysDirectory),\n  worldsFile: z.string().default(WORLD_DEFAULTS.worldsFile),\n  worldgenDirectory: z.string().default(WORLD_DEFAULTS.worldgenDirectory),\n  worldImportPath: z.string().default(WORLD_DEFAULTS.worldImportPath),\n  modules: z.array(zModuleConfig).default(WORLD_DEFAULTS.modules),\n});\n\n// Catchall preserves other plugins' options\nexport const zPluginWorldConfig = zWorldConfig.catchall(z.any());\n"],"mappings":"AAAO,IAAMA,EAAkB,CAC7B,yBAA0B,GAC1B,WAAY,GACZ,WAAY,CAAC,CACf,EAEaC,EAAiB,CAC5B,kBAAmB,OACnB,mBAAoB,SACpB,QAAS,CAAC,EACV,eAAgB,CAAC,EACjB,iBAAkB,aAClB,iBAAkB,YAClB,WAAY,gBACZ,kBAAmB,QACnB,gBAAiB,yBACjB,QAAS,CAAC,CACZ,ECjBA,OAAS,KAAAC,MAAS,MAClB,OAAS,yBAAAC,EAAuB,oBAAAC,EAAkB,SAAAC,EAAO,eAAAC,MAAmB,qBAG5E,IAAMC,EAAcC,EACdC,EAAcD,EACdE,EAAoBC,EAAE,MAAMJ,EAAY,GAAGK,CAAgB,CAAC,EAAE,QAAQC,EAAgB,UAAU,EAGhGC,EAAgBH,EAAE,aACtBA,EAAE,OAAO,CACP,KAAMI,EAAM,SAAS,EACrB,0BAA2BJ,EAAE,QAAQ,EAAE,QAAQE,EAAgB,wBAAwB,CACzF,CAAC,EACDF,EAAE,mBAAmB,aAAc,CACjCA,EAAE,OAAO,CACP,WAAYA,EAAE,QAAQ,EAAI,EAAE,QAAQE,EAAgB,UAAU,CAChE,CAAC,EACDF,EAAE,OAAO,CACP,WAAYA,EAAE,QAAQ,EAAK,EAC3B,WAAYD,CACd,CAAC,CACH,CAAC,CACH,EAEMM,EAAiBL,EAAE,OAAO,CAC9B,MAAOA,EAAE,MAAM,CAACA,EAAE,OAAO,EAAGA,EAAE,OAAO,EAAGA,EAAE,WAAW,UAAU,CAAC,CAAC,EACjE,KAAMA,EAAE,OAAO,CACjB,CAAC,EACKM,EAAqBN,EAAE,OAAO,CAAE,KAAMA,EAAE,WAAWO,CAAqB,EAAG,MAAOP,EAAE,OAAO,CAAE,CAAC,EAE9FQ,EAAgBR,EAAE,OAAO,CAC7B,KAAMF,EACN,KAAME,EAAE,QAAQ,EAAE,QAAQ,EAAK,EAC/B,KAAMA,EAAE,MAAMA,EAAE,MAAM,CAACK,EAAgBC,CAAkB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CACzE,CAAC,EAGYG,EAAeT,EAAE,OAAO,CACnC,kBAAmBA,EAAE,OAAO,EAAE,SAAS,EACvC,mBAAoBA,EAAE,OAAO,EAAE,QAAQU,EAAe,kBAAkB,EACxE,QAASV,EAAE,OAAOJ,EAAaO,CAAa,EAAE,QAAQO,EAAe,OAAO,EAC5E,eAAgBV,EAAE,MAAMJ,CAAW,EAAE,QAAQc,EAAe,cAAc,EAC1E,iBAAkBV,EAAE,OAAO,EAAE,QAAQU,EAAe,gBAAgB,EACpE,iBAAkBV,EAAE,OAAO,EAAE,QAAQU,EAAe,gBAAgB,EACpE,WAAYV,EAAE,OAAO,EAAE,QAAQU,EAAe,UAAU,EACxD,kBAAmBV,EAAE,OAAO,EAAE,QAAQU,EAAe,iBAAiB,EACtE,gBAAiBV,EAAE,OAAO,EAAE,QAAQU,EAAe,eAAe,EAClE,QAASV,EAAE,MAAMQ,CAAa,EAAE,QAAQE,EAAe,OAAO,CAChE,CAAC,EAGYC,EAAqBF,EAAa,SAAST,EAAE,IAAI,CAAC","names":["SYSTEM_DEFAULTS","WORLD_DEFAULTS","z","DynamicResolutionType","zEthereumAddress","zName","zObjectName","zSystemName","zObjectName","zModuleName","zSystemAccessList","z","zEthereumAddress","SYSTEM_DEFAULTS","zSystemConfig","zName","zValueWithType","zDynamicResolution","DynamicResolutionType","zModuleConfig","zWorldConfig","WORLD_DEFAULTS","zPluginWorldConfig"]}