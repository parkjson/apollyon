{"version":3,"sources":["../src/index.ts","../src/debug.ts"],"sourcesContent":["import type { CommandModule } from \"yargs\";\nimport { readFileSync, writeFileSync } from \"fs\";\nimport glob from \"glob\";\nimport { debug } from \"./debug\";\n\ntype Options = {\n  input: string;\n  output: string;\n};\n\nconst commandModule: CommandModule<Options, Options> = {\n  command: \"abi-ts\",\n\n  describe: \"Convert a directory of JSON ABI files to a directory of TS files with `as const`\",\n\n  builder(yargs) {\n    return yargs.options({\n      input: {\n        type: \"string\",\n        desc: \"Input glob of ABI JSON files\",\n        default: \"**/*.abi.json\",\n      },\n    });\n  },\n\n  handler({ input }) {\n    const files = glob.sync(input);\n\n    if (!files.length) {\n      console.error(`No files found for glob: ${input}`);\n      process.exit(1);\n    }\n\n    for (const jsonFilename of files) {\n      const json = readFileSync(jsonFilename, \"utf8\").trim();\n      if (json === \"[]\") {\n        debug(\"Skipping empty ABI file\", jsonFilename);\n        continue;\n      }\n\n      const ts = `declare const abi: ${json}; export default abi;\\n`;\n      const tsFilename = `${jsonFilename}.d.ts`;\n\n      debug(\"Writing\", tsFilename);\n      writeFileSync(tsFilename, ts);\n    }\n\n    process.exit(0);\n  },\n};\n\nexport default commandModule;\n","import createDebug from \"debug\";\n\nexport const debug = createDebug(\"abi-ts\");\n"],"mappings":"AACA,OAAS,gBAAAA,EAAc,iBAAAC,MAAqB,KAC5C,OAAOC,MAAU,OCFjB,OAAOC,MAAiB,QAEjB,IAAMC,EAAQD,EAAY,QAAQ,EDQzC,IAAME,EAAiD,CACrD,QAAS,SAET,SAAU,mFAEV,QAAQC,EAAO,CACb,OAAOA,EAAM,QAAQ,CACnB,MAAO,CACL,KAAM,SACN,KAAM,+BACN,QAAS,eACX,CACF,CAAC,CACH,EAEA,QAAQ,CAAE,MAAAC,CAAM,EAAG,CACjB,IAAMC,EAAQC,EAAK,KAAKF,CAAK,EAExBC,EAAM,SACT,QAAQ,MAAM,4BAA4BD,GAAO,EACjD,QAAQ,KAAK,CAAC,GAGhB,QAAWG,KAAgBF,EAAO,CAChC,IAAMG,EAAOC,EAAaF,EAAc,MAAM,EAAE,KAAK,EACrD,GAAIC,IAAS,KAAM,CACjBE,EAAM,0BAA2BH,CAAY,EAC7C,SAGF,IAAMI,EAAK,sBAAsBH;AAAA,EAC3BI,EAAa,GAAGL,SAEtBG,EAAM,UAAWE,CAAU,EAC3BC,EAAcD,EAAYD,CAAE,EAG9B,QAAQ,KAAK,CAAC,CAChB,CACF,EAEOG,EAAQZ","names":["readFileSync","writeFileSync","glob","createDebug","debug","commandModule","yargs","input","files","glob","jsonFilename","json","readFileSync","debug","ts","tsFilename","writeFileSync","src_default"]}